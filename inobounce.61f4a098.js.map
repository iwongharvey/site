{"version":3,"sources":["src/inobounce.js"],"names":["global","startY","enabled","supportsPassiveOption","opts","Object","defineProperty","get","window","addEventListener","e","handleTouchmove","evt","el","target","zoom","innerWidth","document","documentElement","clientWidth","touches","length","body","style","getComputedStyle","nodeName","getAttribute","scrolling","getPropertyValue","overflowY","height","parseInt","isScrollable","canScroll","scrollHeight","offsetHeight","curY","screenY","isAtTop","scrollTop","isAtBottom","preventDefault","parentNode","handleTouchstart","enable","passive","disable","removeEventListener","isEnabled","testDiv","createElement","appendChild","WebkitOverflowScrolling","scrollSupport","removeChild","iNoBounce","module","exports","define"],"mappings":";;AAAA;;;AAGC,WAASA,MAAT,EAAiB;AACjB;AACA,MAAIC,MAAM,GAAG,CAAb,CAFiB,CAIjB;;AACA,MAAIC,OAAO,GAAG,KAAd;AAEA,MAAIC,qBAAqB,GAAG,KAA5B;;AACA,MAAI;AACH,QAAIC,IAAI,GAAGC,MAAM,CAACC,cAAP,CAAsB,EAAtB,EAA0B,SAA1B,EAAqC;AAC/CC,MAAAA,GAAG,EAAE,YAAW;AACfJ,QAAAA,qBAAqB,GAAG,IAAxB;AACA;AAH8C,KAArC,CAAX;AAKAK,IAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,IAAhC,EAAsCL,IAAtC;AACA,GAPD,CAOE,OAAOM,CAAP,EAAU,CAAE;;AAEd,MAAIC,eAAe,GAAG,UAASC,GAAT,EAAc;AACnC;AACA,QAAIC,EAAE,GAAGD,GAAG,CAACE,MAAb,CAFmC,CAInC;;AACA,QAAIC,IAAI,GAAGP,MAAM,CAACQ,UAAP,GAAoBR,MAAM,CAACS,QAAP,CAAgBC,eAAhB,CAAgCC,WAA/D;;AACA,QAAIP,GAAG,CAACQ,OAAJ,CAAYC,MAAZ,GAAqB,CAArB,IAA0BN,IAAI,KAAK,CAAvC,EAA0C;AACzC;AACA,KARkC,CAUnC;;;AACA,WAAOF,EAAE,KAAKI,QAAQ,CAACK,IAAhB,IAAwBT,EAAE,KAAKI,QAAtC,EAAgD;AAC/C;AACA,UAAIM,KAAK,GAAGf,MAAM,CAACgB,gBAAP,CAAwBX,EAAxB,CAAZ;;AAEA,UAAI,CAACU,KAAL,EAAY;AACX;AACA;AACA,OAP8C,CAS/C;;;AACA,UAAIV,EAAE,CAACY,QAAH,KAAgB,OAAhB,IAA2BZ,EAAE,CAACa,YAAH,CAAgB,MAAhB,MAA4B,OAA3D,EAAoE;AACnE;AACA;;AAED,UAAIC,SAAS,GAAGJ,KAAK,CAACK,gBAAN,CAAuB,4BAAvB,CAAhB;AACA,UAAIC,SAAS,GAAGN,KAAK,CAACK,gBAAN,CAAuB,YAAvB,CAAhB;AACA,UAAIE,MAAM,GAAGC,QAAQ,CAACR,KAAK,CAACK,gBAAN,CAAuB,QAAvB,CAAD,EAAmC,EAAnC,CAArB,CAhB+C,CAkB/C;;AACA,UAAII,YAAY,GAAGL,SAAS,KAAK,OAAd,KAA0BE,SAAS,KAAK,MAAd,IAAwBA,SAAS,KAAK,QAAhE,CAAnB;AACA,UAAII,SAAS,GAAGpB,EAAE,CAACqB,YAAH,GAAkBrB,EAAE,CAACsB,YAArC;;AAEA,UAAIH,YAAY,IAAIC,SAApB,EAA+B;AAC9B;AACA,YAAIG,IAAI,GAAGxB,GAAG,CAACQ,OAAJ,GAAcR,GAAG,CAACQ,OAAJ,CAAY,CAAZ,EAAeiB,OAA7B,GAAuCzB,GAAG,CAACyB,OAAtD,CAF8B,CAI9B;AACA;;AACA,YAAIC,OAAO,GAAIrC,MAAM,IAAImC,IAAV,IAAkBvB,EAAE,CAAC0B,SAAH,KAAiB,CAAlD;AACA,YAAIC,UAAU,GAAIvC,MAAM,IAAImC,IAAV,IAAkBvB,EAAE,CAACqB,YAAH,GAAkBrB,EAAE,CAAC0B,SAArB,KAAmCT,MAAvE,CAP8B,CAS9B;;AACA,YAAIQ,OAAO,IAAIE,UAAf,EAA2B;AAC1B5B,UAAAA,GAAG,CAAC6B,cAAJ;AACA,SAZ6B,CAc9B;;;AACA;AACA,OAtC8C,CAwC/C;;;AACA5B,MAAAA,EAAE,GAAGA,EAAE,CAAC6B,UAAR;AACA,KArDkC,CAuDnC;;;AACA9B,IAAAA,GAAG,CAAC6B,cAAJ;AACA,GAzDD;;AA2DA,MAAIE,gBAAgB,GAAG,UAAS/B,GAAT,EAAc;AACpC;AACAX,IAAAA,MAAM,GAAGW,GAAG,CAACQ,OAAJ,GAAcR,GAAG,CAACQ,OAAJ,CAAY,CAAZ,EAAeiB,OAA7B,GAAuCzB,GAAG,CAACyB,OAApD;AACA,GAHD;;AAKA,MAAIO,MAAM,GAAG,YAAW;AACvB;AACApC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,YAAxB,EAAsCkC,gBAAtC,EAAwDxC,qBAAqB,GAAG;AAAE0C,MAAAA,OAAO,EAAG;AAAZ,KAAH,GAAyB,KAAtG;AACArC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,WAAxB,EAAqCE,eAArC,EAAsDR,qBAAqB,GAAG;AAAE0C,MAAAA,OAAO,EAAG;AAAZ,KAAH,GAAyB,KAApG;AACA3C,IAAAA,OAAO,GAAG,IAAV;AACA,GALD;;AAOA,MAAI4C,OAAO,GAAG,YAAW;AACxB;AACAtC,IAAAA,MAAM,CAACuC,mBAAP,CAA2B,YAA3B,EAAyCJ,gBAAzC,EAA2D,KAA3D;AACAnC,IAAAA,MAAM,CAACuC,mBAAP,CAA2B,WAA3B,EAAwCpC,eAAxC,EAAyD,KAAzD;AACAT,IAAAA,OAAO,GAAG,KAAV;AACA,GALD;;AAOA,MAAI8C,SAAS,GAAG,YAAW;AAC1B,WAAO9C,OAAP;AACA,GAFD,CA/FiB,CAmGjB;AACA;AACA;;;AACA,MAAI+C,OAAO,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAd;AACAjC,EAAAA,QAAQ,CAACC,eAAT,CAAyBiC,WAAzB,CAAqCF,OAArC;AACAA,EAAAA,OAAO,CAAC1B,KAAR,CAAc6B,uBAAd,GAAwC,OAAxC;AACA,MAAIC,aAAa,GAAG,sBAAsB7C,MAAtB,IAAgCA,MAAM,CAACgB,gBAAP,CAAwByB,OAAxB,EAAiC,4BAAjC,MAAmE,OAAvH;AACAhC,EAAAA,QAAQ,CAACC,eAAT,CAAyBoC,WAAzB,CAAqCL,OAArC;;AAEA,MAAII,aAAJ,EAAmB;AAClBT,IAAAA,MAAM;AACN,GA9GgB,CAgHjB;;;AACA,MAAIW,SAAS,GAAG;AACfX,IAAAA,MAAM,EAAEA,MADO;AAEfE,IAAAA,OAAO,EAAEA,OAFM;AAGfE,IAAAA,SAAS,EAAEA;AAHI,GAAhB;;AAMA,MAAI,OAAOQ,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,OAA5C,EAAqD;AACpD;AACAD,IAAAA,MAAM,CAACC,OAAP,GAAiBF,SAAjB;AACA;;AACD,MAAI,OAAOvD,MAAM,CAAC0D,MAAd,KAAyB,UAA7B,EAAyC;AACxC;AACC,eAASA,MAAT,EAAiB;AACjBA,MAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,EAAkB,YAAW;AAAE,eAAOH,SAAP;AAAmB,OAAlD,CAAN;AACA,KAFA,EAECvD,MAAM,CAAC0D,MAFR,CAAD;AAGA,GALD,MAMK;AACJ;AACA1D,IAAAA,MAAM,CAACuD,SAAP,GAAmBA,SAAnB;AACA;AACD,CArIA,EAqIC,IArID,CAAD","file":"inobounce.61f4a098.js","sourceRoot":"..","sourcesContent":["/*! iNoBounce - v0.2.0\n* https://github.com/lazd/iNoBounce/\n* Copyright (c) 2013 Larry Davis <lazdnet@gmail.com>; Licensed BSD */\n(function(global) {\n\t// Stores the Y position where the touch started\n\tvar startY = 0;\n\n\t// Store enabled status\n\tvar enabled = false;\n\n\tvar supportsPassiveOption = false;\n\ttry {\n\t\tvar opts = Object.defineProperty({}, 'passive', {\n\t\t\tget: function() {\n\t\t\t\tsupportsPassiveOption = true;\n\t\t\t}\n\t\t});\n\t\twindow.addEventListener('test', null, opts);\n\t} catch (e) {}\n\n\tvar handleTouchmove = function(evt) {\n\t\t// Get the element that was scrolled upon\n\t\tvar el = evt.target;\n\n\t\t// Allow zooming\n\t\tvar zoom = window.innerWidth / window.document.documentElement.clientWidth;\n\t\tif (evt.touches.length > 1 || zoom !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check all parent elements for scrollability\n\t\twhile (el !== document.body && el !== document) {\n\t\t\t// Get some style properties\n\t\t\tvar style = window.getComputedStyle(el);\n\n\t\t\tif (!style) {\n\t\t\t\t// If we've encountered an element we can't compute the style for, get out\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Ignore range input element\n\t\t\tif (el.nodeName === 'INPUT' && el.getAttribute('type') === 'range') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar scrolling = style.getPropertyValue('-webkit-overflow-scrolling');\n\t\t\tvar overflowY = style.getPropertyValue('overflow-y');\n\t\t\tvar height = parseInt(style.getPropertyValue('height'), 10);\n\n\t\t\t// Determine if the element should scroll\n\t\t\tvar isScrollable = scrolling === 'touch' && (overflowY === 'auto' || overflowY === 'scroll');\n\t\t\tvar canScroll = el.scrollHeight > el.offsetHeight;\n\n\t\t\tif (isScrollable && canScroll) {\n\t\t\t\t// Get the current Y position of the touch\n\t\t\t\tvar curY = evt.touches ? evt.touches[0].screenY : evt.screenY;\n\n\t\t\t\t// Determine if the user is trying to scroll past the top or bottom\n\t\t\t\t// In this case, the window will bounce, so we have to prevent scrolling completely\n\t\t\t\tvar isAtTop = (startY <= curY && el.scrollTop === 0);\n\t\t\t\tvar isAtBottom = (startY >= curY && el.scrollHeight - el.scrollTop === height);\n\n\t\t\t\t// Stop a bounce bug when at the bottom or top of the scrollable element\n\t\t\t\tif (isAtTop || isAtBottom) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\n\t\t\t\t// No need to continue up the DOM, we've done our job\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Test the next parent\n\t\t\tel = el.parentNode;\n\t\t}\n\n\t\t// Stop the bouncing -- no parents are scrollable\n\t\tevt.preventDefault();\n\t};\n\n\tvar handleTouchstart = function(evt) {\n\t\t// Store the first Y position of the touch\n\t\tstartY = evt.touches ? evt.touches[0].screenY : evt.screenY;\n\t};\n\n\tvar enable = function() {\n\t\t// Listen to a couple key touch events\n\t\twindow.addEventListener('touchstart', handleTouchstart, supportsPassiveOption ? { passive : false } : false);\n\t\twindow.addEventListener('touchmove', handleTouchmove, supportsPassiveOption ? { passive : false } : false);\n\t\tenabled = true;\n\t};\n\n\tvar disable = function() {\n\t\t// Stop listening\n\t\twindow.removeEventListener('touchstart', handleTouchstart, false);\n\t\twindow.removeEventListener('touchmove', handleTouchmove, false);\n\t\tenabled = false;\n\t};\n\n\tvar isEnabled = function() {\n\t\treturn enabled;\n\t};\n\n\t// Enable by default if the browser supports -webkit-overflow-scrolling\n\t// Test this by setting the property with JavaScript on an element that exists in the DOM\n\t// Then, see if the property is reflected in the computed style\n\tvar testDiv = document.createElement('div');\n\tdocument.documentElement.appendChild(testDiv);\n\ttestDiv.style.WebkitOverflowScrolling = 'touch';\n\tvar scrollSupport = 'getComputedStyle' in window && window.getComputedStyle(testDiv)['-webkit-overflow-scrolling'] === 'touch';\n\tdocument.documentElement.removeChild(testDiv);\n\n\tif (scrollSupport) {\n\t\tenable();\n\t}\n\n\t// A module to support enabling/disabling iNoBounce\n\tvar iNoBounce = {\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tisEnabled: isEnabled\n\t};\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\t// Node.js Support\n\t\tmodule.exports = iNoBounce;\n\t}\n\tif (typeof global.define === 'function') {\n\t\t// AMD Support\n\t\t(function(define) {\n\t\t\tdefine('iNoBounce', [], function() { return iNoBounce; });\n\t\t}(global.define));\n\t}\n\telse {\n\t\t// Browser support\n\t\tglobal.iNoBounce = iNoBounce;\n\t}\n}(this));\n"]}